(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),c=n(7),r=n(1),i=n(0),l=n.n(i),s=n(8),u=n.n(s),f=n(4);var m=function(e){var t=e.children,n=e.color,a=void 0===n?"primary":n,o=e.className,c=void 0!==o&&o,r=e.small,i=void 0!==r&&r,s=e.outline,u=void 0!==s&&s,f=e.icon,m=e.onClick,p=["btn",u?"btn-outline-".concat(a):"btn-".concat(a),i&&"btn-sm",c].filter(Boolean).join(" "),d=[f,void 0!==t&&"ml-1"].filter(Boolean).join(" ");return l.a.createElement("button",{className:p,type:"submit",onClick:m},t,f&&l.a.createElement("i",{className:d}))},p="https://todo-api.coderslab.pl/api",d=(localStorage.getItem("API_KEY"),function(e){fetch("".concat(p,"/tasks"),{headers:{Authorization:localStorage.getItem("API_KEY")}}).then(function(e){return e.json()}).then(function(t){!1===t.error&&"function"===typeof e&&e(t.data)}).catch(function(e){return console.log(e)})}),h=function(e,t){fetch("".concat(p,"/tasks"),{headers:{Authorization:localStorage.getItem("API_KEY"),"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){!1===e.error&&"function"===typeof t&&t(e.data)}).catch(function(e){return console.log(e)})},E=function(e,t,n){fetch("".concat(p,"/tasks/").concat(e),{headers:{Authorization:localStorage.getItem("API_KEY"),"Content-Type":"application/json"},method:"PUT",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){!1===e.error&&"function"===typeof n&&n(e.data)}).catch(function(e){return console.log(e)})},g=function(e,t){fetch("".concat(p,"/tasks/").concat(e),{headers:{Authorization:localStorage.getItem("API_KEY")},method:"DELETE"}).then(function(e){return e.json()}).then(function(e){!1===e.error&&"function"===typeof t&&t()}).catch(function(e){return console.log(e)})};var b=function(e){var t=e.onNewTask,n=Object(i.useState)(""),a=Object(r.a)(n,2),o=a[0],c=a[1],s=Object(i.useState)(""),u=Object(r.a)(s,2),f=u[0],p=u[1];return l.a.createElement("div",{className:"card shadow"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h1",{className:"card-title"},"New task"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h({title:o,description:f,status:"open"},t)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",name:"title",placeholder:"Title",value:o,onChange:function(e){return c(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",name:"description",placeholder:"Description",value:f,onChange:function(e){return p(e.target.value)}})),l.a.createElement(m,{color:"info",icon:"fas fa-plus-circle"},"Add task"))))},v=function(e,t){fetch("".concat(p,"/tasks/").concat(e,"/operations"),{headers:{Authorization:localStorage.getItem("API_KEY")}}).then(function(e){return e.json()}).then(function(e){!1===e.error&&"function"===typeof t&&t(e.data)}).catch(function(e){return console.log(e)})},j=function(e,t,n){fetch("".concat(p,"/tasks/").concat(e,"/operations"),{headers:{Authorization:localStorage.getItem("API_KEY"),"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){!1===e.error&&"function"===typeof n&&n(e.data)}).catch(function(e){return console.log(e)})},O=function(e,t,n){fetch("".concat(p,"/operations/").concat(e),{headers:{Authorization:localStorage.getItem("API_KEY"),"Content-Type":"application/json"},method:"PUT",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){!1===e.error&&"function"===typeof n&&n(e.data)}).catch(function(e){return console.log(e)})},y=function(e,t){fetch("".concat(p,"/operations/").concat(e),{headers:{Authorization:localStorage.getItem("API_KEY")},method:"DELETE"}).then(function(e){return e.json()}).then(function(e){!1===e.error&&"function"===typeof t&&t()}).catch(function(e){return console.log(e)})};var S=function(e){var t=e.description,n=e.id,a=e.onRemoveOperation,o=e.timeSpent,c=e.status,s=Object(i.useState)(!1),u=Object(r.a)(s,2),f=u[0],p=u[1],d=Object(i.useState)(o),h=Object(r.a)(d,2),E=h[0],g=h[1],b=Object(i.useState)(""),v=Object(r.a)(b,2),j=v[0],S=v[1],N=Math.floor(E/60),k=E%60;return l.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},l.a.createElement("div",null,t,E>0&&l.a.createElement("span",{className:"badge badge-success badge-pill ml-2"},N,"h ",k,"m")),f&&l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),!(isNaN(parseInt(j))||j<0)){var a={description:t,timeSpent:parseInt(E)+parseInt(j)};O(n,a,function(e){g(e.timeSpent),p(!1)})}}},l.a.createElement("div",{className:"input-group input-group-sm"},l.a.createElement("input",{type:"number",className:"form-control",placeholder:"Spent time in minutes",value:j,style:{width:"12rem"},onChange:function(e){return S(e.target.value)}}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement(m,{color:"success",outline:!0,icon:"fas fa-save"}),l.a.createElement(m,{color:"dark",outline:!0,icon:"fas fa-times",onClick:function(){return p(!1)}})))),!f&&l.a.createElement("div",null,"open"===c&&l.a.createElement(m,{icon:"fas fa-clock",color:"success",outline:!0,small:!0,className:"mr-2",onClick:function(){return p(!0)}},"Add time"),l.a.createElement(m,{icon:"fas fa-trash",color:"danger",outline:!0,small:!0,onClick:function(){y(n,function(){a(n)})}})))};var N=function(e){var t=e.taskID,n=e.form,a=e.setForm,o=e.operations,c=e.setOperations,s=e.status,u=Object(i.useState)(""),p=Object(r.a)(u,2),d=p[0],h=p[1],E=function(e){c(function(t){return t.filter(function(t){return t.id!==e})})};return l.a.createElement(l.a.Fragment,null,n&&l.a.createElement("div",{className:"card-body"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),j(t,{description:d,timeSpent:0},function(e){c(function(t){return[e].concat(Object(f.a)(t))}),a(!1),h("")})}},l.a.createElement("div",{className:"input-group"},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"Operation description",value:d,onChange:function(e){return h(e.target.value)}}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement(m,{color:"info",icon:"fas fa-plus-circle"},"Add"))))),l.a.createElement("ul",{className:"list-group list-group-flush"},o.map(function(e){return l.a.createElement(S,Object.assign({key:e.id},e,{onRemoveOperation:E,status:s}))})))};var k=function(e){var t=e.title,n=e.description,a=e.id,o=e.status,c=e.onRemoveTask,s=Object(i.useState)(o),u=Object(r.a)(s,2),f=u[0],p=u[1],d=Object(i.useState)([]),h=Object(r.a)(d,2),b=h[0],j=h[1],O=Object(i.useState)(!1),y=Object(r.a)(O,2),S=y[0],k=y[1];return Object(i.useEffect)(function(){v(a,j)},[]),l.a.createElement("section",{className:"card mt-5 shadow-sm"},l.a.createElement("div",{className:"card-header d-flex justify-content-between align-items-center"},l.a.createElement("div",null,l.a.createElement("h5",null,t),l.a.createElement("h6",{className:"card-subtitle text-muted"},n)),l.a.createElement("div",null,"open"===f&&l.a.createElement(l.a.Fragment,null,l.a.createElement(m,{icon:"fas fa-plus-circle",color:"info",small:!0,onClick:function(){k(function(e){return!e})},className:"mr-2"},"Add operation"),l.a.createElement(m,{icon:"fas fa-archive",color:"dark",small:!0,onClick:function(){E(a,{title:t,description:n,status:"closed"},function(){p("closed")})}},"Finish")),0===b.length&&l.a.createElement(m,{icon:"fas fa-trash",color:"danger",outline:!0,small:!0,onClick:function(){g(a,function(){c(a)})},className:"ml-2"}))),l.a.createElement(N,{taskID:a,form:S,setForm:k,operations:b,setOperations:j,status:f}))};var I=function(){var e=Object(i.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1];Object(i.useEffect)(function(){d(a)},[]);var o=function(e){a(function(t){return t.filter(function(t){return t.id!==e})})};return l.a.createElement(l.a.Fragment,null,l.a.createElement(b,{onNewTask:function(e){a(function(t){return[e].concat(Object(f.a)(t))})}}),n.map(function(e){return l.a.createElement(k,Object.assign({key:e.id},e,{onRemoveTask:o}))}))};function A(e){var t=e.children,n=Object(i.useState)(!0),a=Object(r.a)(n,2),s=a[0],u=a[1],f=function(){var e=Object(c.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==localStorage.getItem("API_KEY")){e.next=9;break}return e.next=3,fetch("https://todo-api.coderslab.pl/apikey/create");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,localStorage.setItem("API_KEY",n.data.apiKey),u(!1);case 9:u(!1);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)(function(){f()},[]),s?l.a.createElement("h1",null,"Loading..."):t}var w=document.getElementById("root");u.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(A,null,l.a.createElement(I,null))),w)},9:function(e,t,n){e.exports=n(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.1a6df4eb.chunk.js.map